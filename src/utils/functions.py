import re

def read_info_txt(filepath, segments = 1000):
    """
    Reads the info.txt files generated by IF_bin_to_csv.py script
    and extracts an array of timestamps.

    Args:
        filepath (str) : path to info.txt file
        segments (int) : the total number of segments in a run (1000 is max for 
                         our scope
    Returns:
        timestamps (list) : list of floats in seconds
    """
    try:
        with open(filepath, 'r') as f
        lines = f.readlines()

        timestamps = []

        for line in lines:
            if len(timestamps) < segments:
                flag = re.search("Time Tags", line)
                if flag:
                    timestamp = line.split(" = ")[-1]
                    timestamp = float(timestamp.split('\'')[1])
                    timestamps.append(timestamp)

    except Error as e:
        print(e)

    return timestamps

